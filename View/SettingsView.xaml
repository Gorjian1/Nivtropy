<UserControl x:Class="Nivtropy.Views.SettingsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:models="clr-namespace:Nivtropy.Models"
             xmlns:converters="clr-namespace:Nivtropy.Converters"
             mc:Ignorable="d"
             d:DesignHeight="450"
             d:DesignWidth="800">
    <UserControl.Resources>
        <converters:EnumToBoolConverter x:Key="EnumToBoolConverter" />
    </UserControl.Resources>

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Margin="20">
            <TextBlock Text="Настройки"
                       FontSize="18"
                       FontWeight="SemiBold"
                       Margin="0,0,0,20" />

            <!-- Общие настройки -->
            <Border BorderBrush="#FFE0E0E0" BorderThickness="0,0,0,1" Padding="0,0,0,16" Margin="0,0,0,16">
                <StackPanel>
                    <TextBlock Text="Общие"
                               FontSize="14"
                               FontWeight="SemiBold"
                               Margin="0,0,0,12" />

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="20" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>

                        <!-- Левая колонка -->
                        <StackPanel Grid.Column="0">
                            <!-- Шрифт таблиц -->
                            <GroupBox Header="Шрифт таблиц" Margin="0,0,0,16">
                                <StackPanel Margin="8">
                                    <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                                        <TextBlock Text="Семейство:"
                                                   VerticalAlignment="Center"
                                                   Width="100" />
                                        <ComboBox Width="180"
                                                  SelectedValue="{Binding TableFontFamily, Mode=TwoWay}"
                                                  SelectedValuePath="Content">
                                            <ComboBoxItem Content="Segoe UI" />
                                            <ComboBoxItem Content="Calibri" />
                                            <ComboBoxItem Content="Arial" />
                                            <ComboBoxItem Content="Times New Roman" />
                                            <ComboBoxItem Content="Consolas" />
                                            <ComboBoxItem Content="Courier New" />
                                        </ComboBox>
                                    </StackPanel>

                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="Размер:"
                                                   VerticalAlignment="Center"
                                                   Width="100" />
                                        <Slider Width="130"
                                                Minimum="10"
                                                Maximum="20"
                                                Value="{Binding TableFontSize, Mode=TwoWay}"
                                                TickFrequency="1"
                                                IsSnapToTickEnabled="True"
                                                TickPlacement="BottomRight" />
                                        <TextBlock Text="{Binding TableFontSize, StringFormat={}{0} pt}"
                                                   Margin="8,0,0,0"
                                                   VerticalAlignment="Center" />
                                    </StackPanel>
                                </StackPanel>
                            </GroupBox>

                            <!-- Сетка таблиц -->
                            <GroupBox Header="Сетка таблиц" Margin="0,0,0,16">
                                <StackPanel Margin="8">
                                    <TextBlock Text="Цвет линий:"
                                               Margin="0,0,0,4" />
                                    <ComboBox SelectedIndex="{Binding GridLineColorIndex, Mode=TwoWay}">
                                        <ComboBoxItem Content="Светло-серый (по умолчанию)" />
                                        <ComboBoxItem Content="Серый" />
                                        <ComboBoxItem Content="Темно-серый" />
                                        <ComboBoxItem Content="Голубоватый" />
                                    </ComboBox>
                                </StackPanel>
                            </GroupBox>
                        </StackPanel>

                        <!-- Правая колонка -->
                        <StackPanel Grid.Column="2">
                            <!-- Раскраска строк -->
                            <GroupBox Header="Раскраска строк" Margin="0,0,0,16">
                                <StackPanel Margin="8">
                                    <RadioButton Content="Без раскраски"
                                                 Margin="0,0,0,8"
                                                 IsChecked="{Binding RowColoringMode, Converter={StaticResource EnumToBoolConverter}, ConverterParameter={x:Static models:RowColoringMode.None}}" />
                                    <RadioButton Content="Чередующиеся цвета"
                                                 Margin="0,0,0,8"
                                                 IsChecked="{Binding RowColoringMode, Converter={StaticResource EnumToBoolConverter}, ConverterParameter={x:Static models:RowColoringMode.Alternating}}" />
                                    <RadioButton Content="Градиент (темнее к концу хода)"
                                                 IsChecked="{Binding RowColoringMode, Converter={StaticResource EnumToBoolConverter}, ConverterParameter={x:Static models:RowColoringMode.Gradient}}" />
                                </StackPanel>
                            </GroupBox>

                            <!-- Внешний вид -->
                            <GroupBox Header="Дополнительно" Margin="0,0,0,0">
                                <StackPanel Margin="8">
                                    <CheckBox Content="Показывать иконки в заголовках колонок"
                                              IsChecked="{Binding ShowColumnHeaderIcons, Mode=TwoWay}" />
                                </StackPanel>
                            </GroupBox>
                        </StackPanel>
                    </Grid>
                </StackPanel>
            </Border>

            <!-- Настройки расчётов -->
            <Border BorderBrush="#FFE0E0E0" BorderThickness="0,0,0,1" Padding="0,0,0,16" Margin="0,0,0,16">
                <StackPanel>
                    <TextBlock Text="Расчёты"
                               FontSize="14"
                               FontWeight="SemiBold"
                               Margin="0,0,0,12" />

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="20" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>

                        <!-- Левая колонка -->
                        <StackPanel Grid.Column="0">
                            <!-- Контроль длин визирных лучей -->
                            <GroupBox Header="Контроль длин визирных лучей" Margin="0,0,0,16">
                                <StackPanel Margin="8">
                                    <CheckBox Content="Проверять минимальную длину"
                                              IsChecked="{Binding CheckMinimumRayLength, Mode=TwoWay}"
                                              Margin="0,0,0,8" />
                                    <StackPanel Orientation="Horizontal" Margin="20,0,0,12"
                                                IsEnabled="{Binding CheckMinimumRayLength}">
                                        <TextBlock Text="Мин. длина:"
                                                   VerticalAlignment="Center"
                                                   Width="80" />
                                        <TextBox Width="60"
                                                 Text="{Binding MinimumRayLength, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                        <TextBlock Text="м" Margin="4,0,0,0" VerticalAlignment="Center" />
                                    </StackPanel>

                                    <CheckBox Content="Проверять максимальную длину"
                                              IsChecked="{Binding CheckMaximumRayLength, Mode=TwoWay}"
                                              Margin="0,0,0,8" />
                                    <StackPanel Orientation="Horizontal" Margin="20,0,0,0"
                                                IsEnabled="{Binding CheckMaximumRayLength}">
                                        <TextBlock Text="Макс. длина:"
                                                   VerticalAlignment="Center"
                                                   Width="80" />
                                        <TextBox Width="60"
                                                 Text="{Binding MaximumRayLength, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                        <TextBlock Text="м" Margin="4,0,0,0" VerticalAlignment="Center" />
                                    </StackPanel>
                                </StackPanel>
                            </GroupBox>

                            <!-- Контроль длины станции -->
                            <GroupBox Header="Контроль длины станции" Margin="0,0,0,0">
                                <StackPanel Margin="8">
                                    <CheckBox Content="Проверять минимальную длину"
                                              IsChecked="{Binding CheckMinimumStationLength, Mode=TwoWay}"
                                              Margin="0,0,0,8" />
                                    <StackPanel Orientation="Horizontal" Margin="20,0,0,0"
                                                IsEnabled="{Binding CheckMinimumStationLength}">
                                        <TextBlock Text="Мин. длина:"
                                                   VerticalAlignment="Center"
                                                   Width="80" />
                                        <TextBox Width="60"
                                                 Text="{Binding MinimumStationLength, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                        <TextBlock Text="м" Margin="4,0,0,0" VerticalAlignment="Center" />
                                    </StackPanel>
                                </StackPanel>
                            </GroupBox>
                        </StackPanel>

                        <!-- Правая колонка -->
                        <StackPanel Grid.Column="2">
                            <!-- Форматирование чисел -->
                            <GroupBox Header="Форматирование чисел" Margin="0,0,0,0">
                                <StackPanel Margin="8">
                                    <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                                        <TextBlock Text="Знаков после запятой для высот:"
                                                   VerticalAlignment="Center"
                                                   TextWrapping="Wrap"
                                                   Width="180" />
                                        <ComboBox Width="60"
                                                  SelectedIndex="{Binding HeightDecimalPlaces, Mode=TwoWay}">
                                            <ComboBoxItem Content="3" />
                                            <ComboBoxItem Content="4" />
                                            <ComboBoxItem Content="5" />
                                        </ComboBox>
                                    </StackPanel>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="Знаков после запятой для превышений:"
                                                   VerticalAlignment="Center"
                                                   TextWrapping="Wrap"
                                                   Width="180" />
                                        <ComboBox Width="60"
                                                  SelectedIndex="{Binding DeltaHDecimalPlaces, Mode=TwoWay}">
                                            <ComboBoxItem Content="3" />
                                            <ComboBoxItem Content="4" />
                                            <ComboBoxItem Content="5" />
                                        </ComboBox>
                                    </StackPanel>
                                </StackPanel>
                            </GroupBox>
                        </StackPanel>
                    </Grid>
                </StackPanel>
            </Border>

            <!-- Настройки проектирования -->
            <Border BorderBrush="#FFE0E0E0" BorderThickness="0,0,0,0" Padding="0,0,0,16">
                <StackPanel>
                    <TextBlock Text="Проектирование"
                               FontSize="14"
                               FontWeight="SemiBold"
                               Margin="0,0,0,12" />
                    <TextBlock Text="Пока нет настроек в этом разделе"
                               Foreground="#FF808080"
                               FontStyle="Italic" />
                </StackPanel>
            </Border>
        </StackPanel>
    </ScrollViewer>
</UserControl>
